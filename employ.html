<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://cdn.bootcss.com/babel-polyfill/6.26.0/polyfill.min.js"></script>
    <link href="https://cdn.bootcss.com/iview/2.4.0/styles/iview.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/vue/2.4.4/vue.js"></script>
    <script src="https://cdn.bootcss.com/iview/2.4.0/iview.min.js"></script>
    <script src="https://cdn.bootcss.com/underscore.js/1.8.3/underscore-min.js"></script>
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script src="public/js/layout.js"></script>
    <link rel="stylesheet" href="public/css/app.css">
</head>
<body>


<!--职信链，样式头为 c (chain小写) 例

头部 c-header
底部 c-footer
组件 c-component-组件名（公用部分）

无特别意义的逻辑结构以 相对有意义模块名 后，层级数字标识
例： c-component-组件名 下

组件名1>组件名1-1.

或

组件名-head>组件名-head-top>（组件名-head-top-1+组件名-head-top-2+组件名-head-top-3）

 -->

<div class="wrap" id="app">
    <div class="c-header">
        <div class="c-head-logo">
            <img src="public/images/logo.png" width="334" alt="职信链LOGO">
        </div>
        <div class="c-head-menu">
            <ul class="head-menu-ul">
                <li>
                    <a href="">购买</a>
                </li>
                <li>
                    <a href="#">职信在线搜索</a>
                    <!--<img src="public/images/head-search.png" width="26" alt="职信链搜索按钮">-->
                </li>
                <li>
                    <div>
                        <!--badge count代表消息数 默认99封顶-->
                        <badge count="1">
                            <a href="#" class="head-message-badge"><img src="public/images/head-mail.png" width="26" alt="消息(0)"></a>
                        </badge>
                    </div>
                </li>
                <li>
                    <div class="c-head-user">
                        <div class="user-photo">
                            <a href=""><img src="public/images/head-photo.png" width="39" alt="用户头像">
                                <span>董兴海</span></a>
                        </div>
                        <div>
                            <img src="public/images/head-line.png" width="2" alt="">
                        </div>
                        <div class="user-logOut">
                            <img src="public/images/head-exit.png" style="cursor: pointer;" width="26" alt="退出">
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <div class="c-body">
        <div class="c-body-left left">
            <div class="body-left-search">
                <auto-complete
                        v-model="value"
                        icon="ios-search"
                        :data="data"
                        placeholder="搜索员工"
                        @on-search="handleSearch"
                        style="width:290px">
                </auto-complete>
            </div>
            <div class="body-left-CName">
                职信链科技有限公司
            </div>
            <div class="left-body-container">
                <!--在职员工-->
                <div class="tree-employ employ-on">
                    <div class="employ-on-block">
                        <img class="employ-icon" src="public/images/tree-employ.png" width="23" alt="在职员工">
                        <span class="employ-title">
                        在职员工
                    </span>
                        <span class="employ-count">
                        (3)
                    </span>
                    </div>
                </div>

                <!--组件-树-->
                <div class="component-tree">
                    <component-tree v-bind:tree='treeData'></component-tree>
                </div>

                <!--添加部门-->
                <div class="tree-addGroup">
                    <icon type="plus-round"></icon><span>添加部门</span>
                </div>

                <!--系统设置-->
                <div class="tree-setting">
                    <icon type="gear-a"></icon><span>系统设置</span>
                </div>

                <!--离职员工-->
                <div class="tree-employ employ-off">
                    <div class="employ-on-block">
                        <img class="employ-icon" src="public/images/tree-employ-off.png" width="23" height="23" alt="离职员工">
                        <span class="employ-title">
                        已离职员工
                    </span>
                        <span class="employ-count">
                        (1)
                    </span>
                    </div>
                </div>
            </div>
        </div>
        <div class="c-body-container clearFix">
            <!--登录后的 员工 页面   组件部分  -->
            <div class="component-employ">
                <div class="employ-container">
                    <!--编辑基础信息-->
                    <div v-show="assessInfoBase6" class="edit-employ-base clearFix">
                        <Card style="width: 100%;">
                            <div class="clearFix">
                                <div class="left">
                                    <div class="edit-info edit-2">
                                        <div>
                                            <div>姓名</div>
                                            <div>
                                                <i-input class="form-el" placeholder="请输入" value="庞丁畅"></i-input>
                                            </div>
                                        </div>
                                        <div>
                                            <div>性别</div>
                                            <div>
                                                <i-select v-model="model1" class="form-el" placeholder="请选择">
                                                    <i-option v-for="item in cityList" :value="item.value" :key="item.value">{{ item.label }}</i-option>
                                                </i-select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="edit-info edit-3">
                                        <div>
                                            <div>身份证号</div>
                                            <div>
                                                <i-input class="form-el" :disabled="true" placeholder="请输入" value="371327199001016415"></i-input>
                                            </div>
                                        </div>
                                        <div>
                                            <div>手机号</div>
                                            <div>
                                                <i-input class="form-el" placeholder="请输入" value="15805322430"></i-input>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="right">
                                    <label class="employ-base-photo" for="employ-base-photo">
                                        <img src="public/images/employ/employ-base-photo.png" width="166" height="166" alt="">
                                        <div class="employ-base-photo-btn">
                                            更换头像
                                        </div>
                                    </label>
                                    <input type="file" name="" style="display: none;" id="employ-base-photo">
                                </div>
                            </div>


                            <div class="edit-7">
                                <div>
                                    <i-button type="ghost" class="edit-7-cancel" v-on:click="assessInfoShow('6')">取消</i-button>
                                    <i-button type="primary" class="edit-7-ok">保存</i-button>
                                </div>
                            </div>

                        </Card>
                    </div>
                    <!--基础信息-->
                    <div v-show="!assessInfoBase6" class="employ-base clearFix">
                        <div class="base-left left">
                            <div class="base-score">
                                <span class="score-1">职信总评分</span>
                                <span class="score-2">8.5</span>
                                <span class="score-3">分</span>
                            </div>
                            <div class="base-info">
                                <span class="base-name">
                                    庞丁畅
                                </span>
                                <span class="base-sex">
                                    性别：男
                                </span>
                                <span class="base-cardID">
                                    身份证号：371327xxxxxxxx6415
                                </span>
                                <span class="base-phone">
                                    手机号：158xxxx2430
                                </span>
                                <span class="base-edit">
                                    <img v-on:click="assessInfoShow('6')" src="public/images/employ/icon-employ-base-edit.png" width="38" alt="">
                                </span>
                            </div>
                        </div>
                        <div class="base-right right">
                            <span class="base-photo">
                                <img src="public/images/employ/employ-base-photo.png" width="166" alt="">
                            </span>
                        </div>
                    </div>
                    <div class="line"></div>


                    <!--评价-->
                    <div class="employ-assess">
                        <div class="assess-operate clearFix overflow">
                            <!--选择所在单位，添加信息-->
                            <div class="operate-select left">
                                <dropdown placement="bottom-end" v-on:on-click="dropdown2">
                                    <div class="select-text">
                                        <span>就职于</span><span class="select-value">{{dropdown2_text}}</span><span>期间职信（目前在职）</span>
                                        <icon type="arrow-down-b"></icon>
                                    </div>
                                    <dropdown-menu slot="list">
                                        <dropdown-item name="职信链科技有限公司">职信链科技有限公司</dropdown-item>
                                        <dropdown-item name="英网股份">英网股份</dropdown-item>
                                    </dropdown-menu>
                                </dropdown>
                            </div>
                            <div v-show="!assessInfoBase5" class="operate-add right">
                                <i-button type="ghost" size="large" shape="circle" icon="plus" class="active" v-on:click="assessInfoShow('5')">添加年度总评</i-button>
                            </div>
                        </div>

                        <!--添加年度总评-->
                        <div v-show="assessInfoBase5" class="add-assess-year clearFix overflow">
                            <Card style="width: 100%;">

                                <div class="edit-info edit-2">
                                    <div>评价年份：</div>
                                    <div>
                                        <row class="form-el">
                                            <i-col span="12">
                                                <date-picker type="month" placement="bottom-end" placeholder="选择日期" style="width: 260px;font-size: 12px;"></date-picker>
                                            </i-col>
                                        </row>
                                    </div>
                                </div>
                                <div class="edit-info edit-3">
                                    <div>评分情况：</div>
                                    <div>
                                        <i-select v-model="model1" class="form-el" placeholder="为员工年度总体表现评分">
                                            <i-option v-for="item in cityList" :value="item.value" :key="item.value">{{ item.label }}</i-option>
                                        </i-select>
                                        <div>

                                        </div>
                                    </div>
                                </div>

                                <div class="edit-info edit-6">
                                    <div> 总评：</div>
                                    <div>
                                        <i-input type="textarea" :maxlength="500" :rows="10" style="width: 520px;" placeholder="请填写评语，500字以内"></i-input>
                                    </div>
                                </div>

                                <div class="edit-7">
                                    <div>
                                        <i-button type="ghost" class="edit-7-cancel" v-on:click="assessInfoShow('5')">取消</i-button>
                                        <i-button type="primary" class="edit-7-ok">保存</i-button>
                                    </div>
                                </div>

                            </Card>
                        </div>
                        <!--展示年度总评-->
                        <div v-show="!assessInfoBase5" class="assess-year clearFix overflow">
                            <div class="assess-year-container">
                                <div class="assess-box left">
                                    <!--员工表现-->
                                    <div class="box-head">
                                        <div class="head-title">
                                            2016年度员工表现
                                        </div>
                                        <div class="head-timeLine">
                                            <img src="public/images/icon-assess-year.png" width="10" alt="" height="10">
                                        </div>
                                    </div>
                                    <div class="box-body">
                                        <!--2016年度-->
                                        <div class="body-1">
                                            <i-circle
                                                    :size="160"
                                                    :trail-width="4"
                                                    :stroke-width="5"
                                                    :percent="90"
                                                    stroke-linecap="square"
                                                    stroke-color="#43a3fb">
                                                <div class="circle-custom">
                                                    <div class="custom-1"><span>9</span><span class="custom-1-2">分</span></div>
                                                    <div class="custom-2 line"></div>
                                                    <span class="custom-3">2016年度
                                                        <br>
    员工表现</span>
                                                </div>
                                            </i-circle>
                                        </div>
                                        <div class="body-2">
                                            <div class="assess-title">2016年度总评</div>
                                            <div class="assess-desc">
                                                <div class="line"></div>
                                                <div>
                                                    主导完成了小职了PC端、APP及微信微站共十几个版本的产品原型设计及需求文档撰写工作，输出质量及效率可以达到公司对产品经理岗位的要求。在产品思维、商业模式探索等方面取得了一些进步。
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <div class="assess-box left">
                                    <!--员工表现-->
                                    <div class="box-head">
                                        <div class="head-title">
                                            2015年度员工表现
                                        </div>
                                        <div class="head-timeLine">
                                            <img src="public/images/icon-assess-year.png" width="10" alt="" height="10">
                                        </div>
                                    </div>
                                    <div class="box-body">
                                        <!--2016年度-->
                                        <div class="body-1">
                                            <i-circle
                                                    :size="160"
                                                    :trail-width="4"
                                                    :stroke-width="5"
                                                    :percent="80"
                                                    stroke-linecap="square"
                                                    stroke-color="#43a3fb">
                                                <div class="circle-custom">
                                                    <div class="custom-1"><span>8</span><span class="custom-1-2">分</span></div>
                                                    <div class="custom-2 line"></div>
                                                    <span class="custom-3">2015年度
                                                        <br>
    员工表现</span>
                                                </div>
                                            </i-circle>
                                        </div>
                                        <div class="body-2">
                                            <div class="assess-title">2015年度总评</div>
                                            <div class="assess-desc">
                                                <div class="line"></div>
                                                <div>
                                                    主导完成了小职了PC端、APP及微信微站共十几个版本的产品原型设计及需求文档撰写工作，输出质量及效率可以达到公司对产品经理岗位的要求。在产品思维、商业模式探索等方面取得了一些进步。
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="assess-info overflow">
                            <tabs v-model="name">
                                <tab-pane name="1" label="基本信息" icon="document-text">
                                    <div v-show="name==1" class="component-assess-info-base" v-bind:class="{'tab-active':name==1}">
                                        <div v-show="!assessInfoBase" class="assess-tab assess-info-base">
                                            <div class="employ-add">
                                                <i-button type="ghost" size="large" shape="circle" icon="plus" class="active" v-on:click="assessInfoShow(name)">添加基本信息</i-button>
                                            </div>
                                            <div class="employ-info">
                                                <div class="e-i-1">部门：</div>
                                                <div class="e-i-2">
                                                    <ul>
                                                        <div>
                                                            产品设计部
                                                        </div>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="employ-info">
                                                <div class="e-i-1">职位：</div>
                                                <div class="e-i-2">
                                                    <ul>
                                                        <div>
                                                            产品经理
                                                        </div>
                                                        <li><Icon type="ios-timer-outline"></Icon>（ 历史职位：产品专员  2014.12.20 至 2015.12.19 ）</li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="employ-info">
                                                <div class="e-i-1">薪资：</div>
                                                <div class="e-i-2">
                                                    <ul>
                                                        <div>
                                                            7000 元/月
                                                        </div>
                                                        <li><Icon type="ios-timer-outline"></Icon>（ 历史薪资：5000元/月  2014.12.20 至 2015.12.19 ）</li>
                                                    </ul>
                                                </div>
                                            </div>

                                            <div class="employ-info">
                                                <div class="e-i-1">劳动合同：</div>
                                                <div class="e-i-2">
                                                    <ul>
                                                        <div>
                                                            2014.12.20 至 2019.12.19
                                                        </div>
                                                    </ul>
                                                </div>
                                            </div>

                                            <div class="employ-info">
                                                <div class="e-i-1" style="text-align: right;">劳动合同或其他法律纠纷：</div>
                                                <div class="e-i-2 pact">
                                                    <ul>
                                                        <li>
                                                            <div>
                                                                纠纷案件名称：泄露商业机密
                                                            </div>
                                                            <div>
                                                                审结时间：2016.11.30
                                                            </div>
                                                            <div>
                                                                审理结果：企业撤诉
                                                            </div>
                                                            <div>
                                                                <img src="public/images/employ/ico-pact.png" width="100" height="100" alt="">
                                                            </div>
                                                        </li>

                                                        <li>
                                                            <div>
                                                                纠纷案件名称：泄露商业机密
                                                            </div>
                                                            <div>
                                                                审结时间：2016.11.30
                                                            </div>
                                                            <div>
                                                                审理结果：企业撤诉
                                                            </div>
                                                            <div>
                                                                <img src="public/images/employ/ico-pact.png" width="100" height="100" alt="">
                                                            </div>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>

                                        </div>
                                        <div v-show="assessInfoBase" class="edit-assess-info-base">
                                            <Card style="width: 100%;">
                                                <div class="edit-1">
                                                    <Icon type="android-alert" style="color:#ffbf00; font-size: 18px;margin-right: 8px;"></Icon>您只需填写员工变更的信息，未变更的不必填写。例如从总监晋升为总经理，您只需在下面的职位栏输入“总经理”，然后保存即可
                                                </div>
                                                <div class="edit-info edit-2">
                                                    <div>职位：</div>
                                                    <div>
                                                        <i-input placeholder="请输入" class="form-el"></i-input>
                                                    </div>
                                                </div>
                                                <div class="edit-info edit-3">
                                                    <div>部门：</div>
                                                    <div>
                                                        <i-select v-model="model1" class="form-el">
                                                            <i-option v-for="item in cityList" :value="item.value" :key="item.value">{{ item.label }}</i-option>
                                                        </i-select>
                                                        <div>

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="edit-info edit-4">
                                                    <div>薪资：</div>
                                                    <div>
                                                        <div>
                                                            <i-input placeholder="请输入" class="form-el"></i-input>
                                                            <span>元/月</span>
                                                        </div>
                                                        <div style="margin-top: 15px;">
                                                            <i-switch size="large">
                                                                <span slot="open">显示</span>
                                                                <span slot="close">隐藏</span>
                                                            </i-switch>
                                                            该员工的职信被在线搜索查看时，薪资是否显示
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="edit-info edit-5">
                                                    <div>新增劳动合同起止时间：</div>
                                                    <div>
                                                        <row class="form-el">
                                                            <i-col span="12">
                                                                <date-picker type="daterange" placement="top-end" placeholder="选择日期" style="width: 260px;font-size: 12px;"></date-picker>
                                                            </i-col>
                                                        </row>
                                                    </div>
                                                </div>
                                                <div class="edit-info edit-6">
                                                    <div>合同期内离职时间：</div>
                                                    <div>
                                                        <row class="form-el">
                                                            <i-col span="12">
                                                                <date-picker type="date" placement="top-end" placeholder="选择日期" style="width: 260px;font-size: 12px;"></date-picker>
                                                            </i-col>
                                                        </row>
                                                        <div style="margin-top: 15px;">
                                                            （若未离职则无需填写）
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="edit-info">
                                                    <div>劳动合同或其他法律纠纷：</div>
                                                    <div>

                                                        <div style="margin-top: 10px;">
                                                            <i-switch size="large" v-model="pactShow">
                                                                <span slot="open">有</span>
                                                                <span slot="close">无</span>
                                                            </i-switch>

                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="pact" v-show="pactShow"
                                                     style="border: 1px solid #d9d9d9; margin-top: 20px;"
                                                >

                                                    <div class="edit-info">
                                                        <div>纠纷案件名称：</div>
                                                        <div>
                                                            <i-input placeholder="请输入" class="form-el"></i-input>
                                                        </div>
                                                    </div>

                                                    <div class="edit-info">
                                                        <div>合同期内离职时间：</div>
                                                        <div>
                                                            <row class="form-el">
                                                                <i-col span="12">
                                                                    <date-picker type="date" placement="top-end" placeholder="选择日期" style="width: 260px;font-size: 12px;"></date-picker>
                                                                </i-col>
                                                            </row>
                                                        </div>
                                                    </div>
                                                    <div class="edit-info">
                                                        <div>审理结果：</div>
                                                        <div>
                                                            <i-select v-model="model1" class="form-el">
                                                                <i-option v-for="item in cityList" :value="item.value" :key="item.value">{{ item.label }}</i-option>
                                                            </i-select>
                                                            <div>

                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="edit-info">
                                                        <div>上传附件：</div>
                                                        <div>
                                                            <upload
                                                                    style="width:200px; height: 200px;"
                                                                    multiple
                                                                    type="drag"
                                                                    action="/">
                                                                <div style="padding: 20px 0">
                                                                    <icon type="ios-cloud-upload" size="52" style="color: #3399ff"></icon>
                                                                    <p>点击添加</p>
                                                                </div>
                                                            </upload>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="edit-7">
                                                    <div>
                                                        <i-button type="ghost" class="edit-7-cancel" v-on:click="assessInfoShow(name)">取消</i-button>
                                                        <i-button type="primary" class="edit-7-ok">保存</i-button>
                                                    </div>
                                                </div>

                                            </Card>
                                        </div>
                                    </div>
                                </tab-pane>
                                <tab-pane name="2" label="月度评价" icon="document-text">
                                    <div v-show="name==2" class="component-assess-info-month" v-bind:class="{'tab-active':name==2}">
                                        <div v-show="!assessInfoBase2" class="assess-tab assess-info-month">

                                            <div class="employ-add">
                                                <i-button type="ghost" size="large" shape="circle" icon="plus" class="active" v-on:click="assessInfoShow(name)">添加月度评价</i-button>
                                            </div>

                                            <div class="month-table-container">

                                                <div class="month-table-1">
                                                    <div class="table-title">评分情况：</div>
                                                    <i-table border :columns="columns1" :data="data1"></i-table>
                                                </div>

                                                <div class="month-table-2">
                                                    <div class="table-title">业绩情况：</div>
                                                    <i-table border :columns="columns2" :data="data2"></i-table>
                                                </div>

                                                <div class="month-table-3">
                                                    <div class="table-title">考勤情况：</div>
                                                    <i-table border :columns="columns3" :data="data3"></i-table>
                                                </div>

                                                <div class="month-table-4" row-class-name="table4_hide_head">
                                                    <div class="table-title">奖惩情况：</div>
                                                    <i-table border :columns="columns4" :data="data4"></i-table>
                                                </div>

                                                <div class="time-line">
                                                    <div class="table-title">评语：</div>
                                                    <timeline>
                                                        <timeline-item>
                                                            <div class="time"><span class="icon-time-line-arrow"></span>业绩突出，再接再厉</div>
                                                        </timeline-item>
                                                        <timeline-item>
                                                            <div class="time"><span class="icon-time-line-arrow"></span>业绩突出，奖励1万元</div>
                                                        </timeline-item>
                                                        <timeline-item>
                                                            <div class="time"><span class="icon-time-line-arrow"></span>业绩突出，奖励1万元，业绩突出，奖励1万元,业绩突出，奖励1万元,业绩突出，奖励1万元业绩突出，奖励1万元业绩突出，奖励1万元业绩突出，奖励1万元业绩突出，奖励1万元，业绩突出，奖励1万元,业绩突出，奖励1万元,业绩突出</div>
                                                        </timeline-item>
                                                    </timeline>
                                                </div>

                                            </div>

                                        </div>
                                        <div v-show="assessInfoBase2" class="edit-assess-info-month">
                                            <Card style="width: 100%;">
                                                <div class="edit-1">
                                                    <Icon type="android-alert" style="color:#ffbf00; font-size: 18px;margin-right: 8px;"></Icon>请尽量完善以下评价内容，最少填写一项
                                                </div>
                                                <div class="edit-info edit-2">
                                                    <div>评价月份：</div>
                                                    <div>
                                                        <row class="form-el">
                                                            <i-col span="12">
                                                                <date-picker type="month" placement="bottom-end" placeholder="选择月" style="width: 260px;font-size: 12px;"></date-picker>
                                                            </i-col>
                                                        </row>
                                                    </div>
                                                </div>
                                                <div class="edit-info edit-3">
                                                    <div>评分情况：</div>
                                                    <div>
                                                        <i-select v-model="model1" class="form-el" placeholder="请为员工本月综合表现评分">
                                                            <i-option v-for="item in cityList" :value="item.value" :key="item.value">{{ item.label }}</i-option>
                                                        </i-select>
                                                        <div>

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="edit-info edit-4">
                                                    <div>业绩情况：</div>
                                                    <div>
                                                        <div>
                                                            <i-select v-model="model1" class="form-el" placeholder="请选择排名">
                                                                <i-option v-for="item in cityList" :value="item.value" :key="item.value">{{ item.label }}</i-option>
                                                            </i-select>
                                                        </div>
                                                        <div style="margin-top: 15px;">
                                                            <i-input placeholder="业绩额（选填）" class="form-el"></i-input>
                                                            <i-select v-model="model1" class="form-el" placeholder="万元">
                                                                <i-option v-for="item in cityList" :value="item.value" :key="item.value">{{ item.label }}</i-option>
                                                            </i-select>
                                                        </div>
                                                        <div style="margin-top: 15px;">
                                                            <i-switch size="large">
                                                                <span slot="open">显示</span>
                                                                <span slot="close">隐藏</span>
                                                            </i-switch>
                                                            该名员工职信被在线搜索查看时，业绩额是否显示
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="edit-info edit-5">
                                                    <div>考勤情况：</div>
                                                    <div>
                                                        <i-select v-model="model1" class="form-el" placeholder="请选择排名">
                                                            <i-option v-for="item in cityList" :value="item.value" :key="item.value">{{ item.label }}</i-option>
                                                        </i-select>
                                                    </div>
                                                </div>
                                                <div class="edit-info edit-6">
                                                    <div>奖惩情况：</div>
                                                    <div>
                                                        <i-button class="form-el" type="ghost" icon="plus">添加奖惩记录</i-button>
                                                    </div>
                                                </div>
                                                <div class="edit-info edit-6">
                                                    <div>评语：</div>
                                                    <div>
                                                        <i-input type="textarea" :rows="10" style="width: 520px;" placeholder="请填写评语，500字以内" :maxlength="500"></i-input>
                                                    </div>
                                                </div>

                                                <div class="edit-7">
                                                    <div>
                                                        <i-button type="ghost" class="edit-7-cancel" v-on:click="assessInfoShow(name)">取消</i-button>
                                                        <i-button type="primary" class="edit-7-ok">保存</i-button>
                                                    </div>
                                                </div>

                                            </Card>
                                        </div>
                                    </div>
                                </tab-pane>
                                <tab-pane name="3" label="季度评价" icon="document-text">
                                    <div v-show="name==3" class="component-assess-info-q" v-bind:class="{'tab-active':name==3}">
                                        <div class="assess-tab assess-info-q">
                                            效果同月度-组件化
                                        </div>
                                    </div>
                                </tab-pane>
                                <tab-pane name="4" label="年度评价" icon="document-text">
                                    <div v-show="name==4" class="component-assess-info-year" v-bind:class="{'tab-active':name==4}">
                                        <div class="assess-tab assess-info-year">
                                            效果同月度-组件化
                                        </div>
                                    </div>
                                </tab-pane>
                            </tabs>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>


<!--tree 模板-->
<script type="html/x-template" id="component-tree">

    <div class="employ-group">

        <!--忽略根节点,输出目录-->
        <div v-if="!tree.root" class="box group-box member-box">
            <!--目录ico逻辑-->
            <div class="box-icon" v-on:click="click" openValue="openValue">
                <!--部门icon-->
                <template v-if="openValue==='.'">
                    <img v-bind:src="tree.photo" width="28" alt="图标">
                </template>
                <!--员工icon-->
                <template v-else>
                    <img src="public/images/tree-group.png" width="19" alt="图标">
                    <img class="arrow-rotate-none" v-bind:class="{'arrow-rotate':open}" src="public/images/tree-arrow.png" style="margin-left: 4px;" width="7" alt="">
                </template>
            </div>
            <!--部门和员工名称-->
            <div v-if="!editStatus" v-on:click="edit" class="box-content">
                <span>{{tree.title}}</span>
            </div>
            <!--编辑状态-->
            <div v-else class="box-content"><i-input v-model="groupName" placeholder="请输入..." size="small" style="width: 100px;"></i-input><span v-on:click.stop="save(tree.id)"><img
                    src="public/images/tree-group-edit.png" width="16" style="margin-left: 8px;margin-top: -2px;" alt=""></span></div>
            <!--控制状态-->
            <div v-if="tree.dataList && !tree.root && !editStatus" class="box-control">
                <dropdown @on-click="dropDown" placement="bottom-end">
                    <a href="javascript:void(0)">
                        添加
                        <icon type="arrow-down-b"></icon>
                    </a>
                    <dropdown-menu slot="list">
                        <dropdown-item name="E">员工</dropdown-item>
                        <dropdown-item name="G">部门</dropdown-item>
                    </dropdown-menu>
                </dropdown>
            </div>
        </div>
        <!--递归树-->
        <component-tree v-show="open" v-bind:tree="tree" v-for="tree in tree.dataList" key="tree.id"></component-tree>

    </div>

</script>

<!--评价，汽泡查看、添加组件-->
<script type="html/x-template" id="component-assess-add-tip">
    <div class="component-assess-add-tip" v-if="data.show">
        <poptip width="200" placement="top">
            <i-button type="text" size="small">查看</i-button>
            <div class="api" slot="content">
                {{data.date}}
            </div>
        </poptip>
        <poptip width="200" placement="top" v-model="visible">
            <i-button type="text" size="small">添加</i-button>
            <div class="api" slot="content">
                <div>
                    <i-input placeholder="添加"></i-input>
                </div>
                <div style="padding:10px 0 ;">
                    <i-button type="text" size="small" @click="close">取消</i-button>
                    <i-button type="primary" size="small">保存</i-button>
                </div>
            </div>
        </poptip>
    </div>
    <div class="component-assess-add-tip" v-else>
        <poptip width="200" placement="top" v-model="visible">
            <i-button type="text" size="small">添加</i-button>
            <div class="api" slot="content">
                <div>
                    <i-input placeholder="添加"></i-input>
                </div>
                <div style="padding:10px 0 ;">
                    <i-button type="text" size="small" @click="close">取消</i-button>
                    <i-button type="primary" size="small">保存</i-button>
                </div>
            </div>
        </poptip>
    </div>
</script>

<script>
//    tree-item component

/***
 * 组件树
 * @params
 * open 展开当前树 <Boolean>
 * groupName 添加/编辑，部门 <String>
 * tempName 保存添加/编辑，部门的临时字段 <String>
 * editStatus 编辑状态 <Boolean>
 *
 * @method
 * 见名识意
 */

    Vue.component('ComponentTree', {
        template:'#component-tree',
        props:['tree'],
        data:function(){
            return {
                // 展开当前树,节点类型
                open:false,
                // 添加/编辑，部门
                groupName:'',
                tempName:'',
                // 编辑状态
                editStatus:false,
            }
        },
        computed:{
            openValue:function(){
                return !this.open&&this.tree.dataList?'+':(this.tree.dataList?'-':'.')
            }
        },
        mounted:function(){

            if(this.tree.open){
                this.open=true
            }else{
                this.tree.root?this.open=true:this.open;
            }

        },
        methods: {
            click:function(){
                this.open=!this.open
            },
            add:function(type){
                if(this.tree.dataList){
                    var isGroup= type=='G'?true:false;
                    if(isGroup){
                        var _this = this;
                        this.$Modal.confirm({
                            render:function(h){
                                return h('Input',{
                                    props:{
                                        placeholder:'请输入部门名称'
                                    },
                                    on:{
                                        'input':function(val){

                                            _this.groupName = val
                                        }
                                    }
                                })
                            },
                            onOk:function(){
                                if(_this.groupName==''){
                                    _this.$Message.info('添加失败，内容不能为空！')
                                    return;
                                }
                                _this.tree.dataList.push({id:_.uniqueId('tree_'),title:_this.groupName,dataList:[]});
                            },
                            onCancel:function(){

                            }
                        });

                    }else{
                        var dataLists = _.filter(this.tree.dataList,function(item){
                            if(item.dataList){
                                return true;
                            }
                        })
                        var listLength = dataLists.length;
                        var oListLength = this.tree.dataList.length;
                        this.tree.dataList.splice(oListLength-listLength,0,{id:_.uniqueId('tree_'),title:'员工'+_.uniqueId(),photo:'public/images/tree-photo-default.png'})
                    }
                    // 添加部门或员工时打开菜单
                    this.open=true;
                }
            },
            edit:function(){
                if(!this.tree.dataList||this.tree.root) return;
                this.groupName = this.tree.title;
                this.tempName = this.tree.title;
                this.editStatus=!this.editStatus;
            },
            remove:function(id){
                prune(treeData.dataList,id)
            },
            // save && delete
            save:function(id){
                if(this.groupName===''){
                    var _this = this;
                    this.$Modal.confirm({
                            title: '确认删除？',
                            content: '<p>确认删除后，部门下成员将一并删除！</p>',
                            onOk: () => {
                            this.$Message.info('删除成功');
                    prune(treeData.dataList,id)
                },
                    onCancel: () => {
                        _this.tree.title =_this.tempName;
                        this.$Message.info('取消操作');
                    }
                });
                }
                this.tree.title = this.groupName;
                this.editStatus=false;
            },
            dropDown:function (v) {
               this.add(v)
            }
        }
    })
/**
 * 组件-添加备注
 *
 *
 */
    Vue.component('ComponentAssessAddTip',{
        template:'#component-assess-add-tip',
        props:['data'],
        data:function () {
            return {
                visible: false
            }
        },
        methods:{
            close () {
                this.visible = false;
            }
        }
    })






    var treeData =
        {
            id:'0',
            title:'青岛英网资讯股份有限公司',
            root:true,
            dataList:[
                {
                    id:'1',
                    title:'总裁办',
                    dataList:[
                        {
                            id:'11',
                            title:'创始人-老总',
                            photo:'public/images/tree-photo1.png'
                        }
                    ]
                },
                {
                    id:'2',
                    title:'技术中心',
                    open:true,
                    dataList:[
                        {
                            id:'3',
                            title:'周蕾',
                            photo:'public/images/tree-photo2.png'
                        },
                        {
                            id:'4',
                            title:'李文静',
                            photo:'public/images/tree-photo3.png'
                        },
                        {
                            id:'5',
                            title:'PHP开发',
                            dataList:[
                                {
                                    id:'6',
                                    title:'王小笨',
                                    photo:'public/images/tree-photo1.png'
                                }
                            ]
                        }
                    ]
                },
                {
                    id:'7',
                    title:'产品部门',
                    dataList:[
                        {
                            id:'10',
                            title:'庞丁畅',
                            photo:'public/images/tree-photo1.png'
                        }
                    ]
                },
                {
                    id:'8',
                    title:'行政部门',
                    dataList:[
                        {
                            id:'9',
                            title:'衣晶晶',
                            photo:'public/images/tree-photo1.png'
                        }
                    ]
                }
            ]
        }

    // 树删除节点
    function prune(array, id) {
        for (var i = 0; i < array.length; ++i) {
            var obj = array[i];
            if (obj.id === id) {
                array.splice(i, 1);
                return true;
            }
            if (obj.dataList) {
                if (prune(obj.dataList, id)) {
                    if (obj.dataList.length === 0) {
                        // delete obj.dataList;
                        // array.splice(i, 1);
                    }
                    return true;
                }
            }
        }
    }
/***
 * 实例根vue，处理初始数据和vuex状态管理
 * @params
 * value 搜索员工 <String>
 * data 搜索员工结果 <Array>
 * treeData 组件树异步数据 <String>
 *
 * @method
 * handleSearch 搜索员工事件
 */
    new Vue({
        data: function () {
            return {
                value:'',
                data:[],
                treeData:treeData,






                //不当在这里，属于年度总评组件内属性。

                pactShow:false,//合同纠纷问题
                name:"1",//被选中Tab
                assessInfoBase:true,//第一个tab开关状态
                assessInfoBase2:true,//第2个tab开关状态
                assessInfoBase3:false,//第3个tab开关状态
                assessInfoBase4:false,//第4个tab开关状态
                assessInfoBase5:true,//年度总评开关状态
                assessInfoBase6:true,//基础信息编辑开关状态

                percent: 0,
                dropdown2_text:'职信链科技有限公司',

                columns1: [
                    {
                        title: '年份及月度',
                        key: 'title',
                        className:'t-columns1'
                    },
                    {
                        title: '月度评分',
                        key: 'score',
                        className:'t-columns2'
                    }
                ],
                data1: [
                    {
                        title: '2017.8',
                        score: 8
                    },
                    {
                        title: '2017.7',
                        score: 7
                    },
                    {
                        title: '2017.6',
                        score: 8
                    },
                ],
//table2
                columns2: [
                    {
                        title: '年份及月度',
                        key: 'date',
                        className:'t-columns1'
                    },
                    {
                        title: '排名情况',
                        key: 'order',
                        className:'t-columns2'
                    },
                    {
                        title: '业绩额',
                        key: 'performance',
                        className:'t-columns3'
                    },
                    {
                        title: '员工意见',
                        key: 'recommend',
                        className:'t-columns4'
                    },
                    {
                        title: '企业备注',
                        key: 'remark',
                        render: (h, params) => {
                            return h('div', [
                                h('component-assess-add-tip',{
                                    props:{
                                        data:this.data2[params.index]
                                    }
                                })
                            ]);
                        }
                    }
                ],
                data2: [
                    {
                        date: '2017.8',
                        order: '靠前',
                        performance: '50万',
                        recommend: '认同'
                    },
                    {
                        date: '2017.7',
                        order: '靠前',
                        performance: '60万',
                        recommend: '认同',
                        show:true
                    },
                    {
                        date: '2017.6',
                        order: '靠前',
                        performance: '70万',
                        recommend: '认同'
                    }

                ],
//table3
                columns3: [
                    {
                        title: '年份及月度',
                        key: 'date',
                        className:'t-columns1'
                    },
                    {
                        title: '考勤排名',
                        key: 'order',
                        className:'t-columns2'
                    },
                    {
                        title: '员工意见',
                        key: 'recommend',
                        className:'t-columns3'
                    },
                    {
                        title: '企业备注',
                        key: 'remark',
                        render: (h, params) => {
                            return h('div', [
                                h('ComponentAssessAddTip',{
                                    props:{
                                        data:this.data2[params.index]
                                    }
                                })
                            ]);
                        }
                    }
                ],
                data3: [
                    {
                        date: '2017.8',
                        order: '靠前',
                        recommend: '认同'
                    },
                    {
                        date: '2017.7',
                        order: '靠前',
                        recommend: '认同',
                        show:true
                    },
                    {
                        date: '2017.6',
                        order: '靠前',
                        recommend: '认同'
                    }

                ],
//                table4
                columns4: [
                    {
                        title: '年份及月度',
                        key: 'title',
                        className:'t-columns1'
                    },
                    {
                        title: '月度评分',
                        key: 'score'
                    }
                ],
                data4: [
                    {
                        title: '2017.8',
                        score: '业绩突出，奖励1万元'
                    },
                    {
                        title: '2017.7',
                        score: '业绩突出，奖励1万元'
                    },
                    {
                        title: '2017.6',
                        score: '业绩突出，奖励1万元'
                    },
                ],



//                编辑数据
                cityList: [
                    {
                        value: 'beijing',
                        label: '北京市'
                    },
                    {
                        value: 'shanghai',
                        label: '上海市'
                    },
                    {
                        value: 'shenzhen',
                        label: '深圳市'
                    },
                    {
                        value: 'hangzhou',
                        label: '杭州市'
                    },
                    {
                        value: 'nanjing',
                        label: '南京市'
                    },
                    {
                        value: 'chongqing',
                        label: '重庆市'
                    }
                ],
                model1: ''
            }
        },
        methods: {
            handleSearch : function(value) {
                this.data = !value ? [] : [
                    value,
                    value + value,
                    value + value + value
                ];
            },

//            属于年度总评组件
            dropdown2:function (v) {
                this.dropdown2_text = v;
            },
            show (index) {
                this.$Modal.info({
                    title: '用户信息',
                    content: `${this.data2[index].date}`
                })
            },
            remove (index) {
                this.data2.splice(index, 1);
            },
            assessInfoShow(name){

                switch(name){
                    case '1':
                        this.assessInfoBase=!this.assessInfoBase;
                        break;
                    case '2':
                        this.assessInfoBase2=!this.assessInfoBase2;
                        break;
                    case '3':
                        this.assessInfoBase3=!this.assessInfoBase3;
                        break;
                    case '4':
                        this.assessInfoBase4=!this.assessInfoBase4;
                        break;
                    case '5':
                        this.assessInfoBase5=!this.assessInfoBase5;
                        break;
                    case '6':
                        this.assessInfoBase6=!this.assessInfoBase6;
                        break;
                    default:
                        break;
                }

            }

        }
    }).$mount('#app')
</script>


</body>
</html>